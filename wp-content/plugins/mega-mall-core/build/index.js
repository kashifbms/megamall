(()=>{"use strict";const e=window.wp.i18n,l=window.wp.blockEditor,o=window.wp.components,i=window.wp.element,a=window.ReactJSXRuntime;wp.blocks.registerBlockType("megamall/hero-slider",{edit:function({attributes:n,setAttributes:s}){const{slides:t=[],autoplay:m,speed:r,showArrows:d,showDots:c,fullHeight:g}=n,h=(0,l.useBlockProps)({className:"mm-hero-slider-editor"}),x=(e,l)=>{const o=t.map((o,i)=>i!==e?o:{...o,...l});s({slides:o})},u=()=>{s({slides:[...t,{imageId:null,imageUrl:"",infoTimingTitle:"Test",infoTimingText:"",infoLocationTitle:"",infoLocationCtaLabel:"",infoLocationCtaUrl:"",showInfoBox:!0}]})},C=(e,l)=>{if(l<0||l>=t.length)return;const o=[...t],i=o.splice(e,1)[0];o.splice(l,0,i),s({slides:o})};return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l.InspectorControls,{children:(0,a.jsxs)(o.PanelBody,{title:(0,e.__)("Slider Settings","mega-mall"),initialOpen:!0,children:[(0,a.jsx)(o.ToggleControl,{label:(0,e.__)("Autoplay","mega-mall"),checked:m,onChange:e=>s({autoplay:e})}),(0,a.jsx)(o.RangeControl,{label:(0,e.__)("Autoplay Speed (ms)","mega-mall"),value:r,min:1e3,max:1e4,step:500,onChange:e=>s({speed:e})}),(0,a.jsx)(o.ToggleControl,{label:(0,e.__)("Show Arrows","mega-mall"),checked:d,onChange:e=>s({showArrows:e})}),(0,a.jsx)(o.ToggleControl,{label:(0,e.__)("Show Dots","mega-mall"),checked:c,onChange:e=>s({showDots:e})}),(0,a.jsx)(o.ToggleControl,{label:(0,e.__)("Full Height (100vh)","mega-mall"),checked:g,onChange:e=>s({fullHeight:e})}),(0,a.jsx)(o.ToggleControl,{label:"Medium height (max 500px)",checked:n.mediumHeight,onChange:e=>{s({mediumHeight:e,fullHeight:!e&&n.fullHeight})}})]})}),(0,a.jsxs)("div",{...h,children:[0===t.length&&(0,a.jsxs)("div",{className:"mm-hero-empty",children:[(0,a.jsx)("p",{children:(0,e.__)("No slides yet. Add your first hero slide.","mega-mall")}),(0,a.jsx)(o.Button,{variant:"primary",onClick:u,children:(0,e.__)("Add Slide","mega-mall")})]}),t.map((i,n)=>(0,a.jsxs)("div",{className:"mm-hero-slide-editor",children:[(0,a.jsxs)("div",{className:"mm-hero-slide-header",children:[(0,a.jsxs)("strong",{children:[(0,e.__)("Slide","mega-mall")," #",n+1]}),(0,a.jsxs)("div",{className:"mm-hero-slide-actions",children:[(0,a.jsx)(o.Button,{size:"small",onClick:()=>C(n,-1),disabled:0===n,children:"↑"}),(0,a.jsx)(o.Button,{size:"small",onClick:()=>C(n,1),disabled:n===t.length-1,children:"↓"}),(0,a.jsx)(o.Button,{isDestructive:!0,size:"small",onClick:()=>(e=>{const l=t.filter((l,o)=>o!==e);s({slides:l})})(n),children:(0,e.__)("Remove","mega-mall")})]})]}),(0,a.jsxs)("div",{className:"mm-hero-slide-body",children:[(0,a.jsxs)("div",{className:"mm-hero-slide-image",children:[(0,a.jsx)(l.MediaUploadCheck,{children:(0,a.jsx)(l.MediaUpload,{onSelect:e=>{x(n,{imageId:e.id,imageUrl:e.url})},allowedTypes:["image"],value:i.imageId,render:({open:l})=>(0,a.jsx)(o.Button,{onClick:l,className:"button button-large",children:i.imageUrl?(0,e.__)("Change Background Image","mega-mall"):(0,e.__)("Select Background Image","mega-mall")})})}),i.imageUrl&&(0,a.jsx)("div",{className:"mm-hero-image-preview",children:(0,a.jsx)("img",{src:i.imageUrl,alt:""})})]}),(0,a.jsxs)("div",{className:"mm-hero-slide-info",children:[(0,a.jsx)(o.ToggleControl,{label:(0,e.__)("Show Info Box on this slide","mega-mall"),checked:!!i.showInfoBox,onChange:e=>x(n,{showInfoBox:Boolean(e)})}),!1!==i.showInfoBox&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.TextControl,{label:(0,e.__)("Timing Title","mega-mall"),value:i.infoTimingTitle||"",onChange:e=>x(n,{infoTimingTitle:e})}),(0,a.jsx)(o.TextareaControl,{label:"Timing Text",value:"string"==typeof i.infoTimingText?i.infoTimingText:"",onChange:e=>x(n,{infoTimingText:e})}),(0,a.jsx)(o.TextControl,{label:(0,e.__)("Location Title","mega-mall"),value:i.infoLocationTitle||"",onChange:e=>x(n,{infoLocationTitle:e})}),(0,a.jsx)(o.TextControl,{label:(0,e.__)("Location CTA Label","mega-mall"),value:i.infoLocationCtaLabel||"",onChange:e=>x(n,{infoLocationCtaLabel:e})}),(0,a.jsx)(o.TextControl,{label:(0,e.__)("Location CTA URL","mega-mall"),value:i.infoLocationCtaUrl||"",onChange:e=>x(n,{infoLocationCtaUrl:e})})]})]})]})]},n)),t.length>0&&(0,a.jsx)("div",{className:"mm-hero-add-more",children:(0,a.jsx)(o.Button,{variant:"secondary",onClick:u,children:(0,e.__)("Add Another Slide","mega-mall")})})]})]})},save:()=>null})})();